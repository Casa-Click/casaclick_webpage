// Función para enviar el formulario por correo electrónico
function sendEmail(event) {
    event.preventDefault(); // Prevenir la acción predeterminada del formulario

    var emailTo = "equipocasaclick@gmail.com"; // Dirección de correo de Casa Click

    var name = document.getElementById("name").value;
    var email = document.getElementById("email").value;
    var message = document.getElementById("message").value;

    // Formatear el asunto y el cuerpo del mensaje para el correo electrónico
    var subject = "Nuevo contacto desde el formulario de Casa Click";
    var body = "Nombre: " + name + "%0A" +
               "Email: " + email + "%0A" +
               "Mensaje: " + message;

    // Generar la URL de mailto
    var mailtoURL = "mailto:" + emailTo + "?subject=" + subject + "&body=" + body;

    // Abrir el cliente de correo sin abrir una nueva pestaña
    window.location.href = mailtoURL;

    // Limpiar los campos del formulario
    document.getElementById("contactForm").reset();

    // Mostrar mensaje de confirmación al usuario
    document.getElementById("confirmation-message").style.display = "block";
}

$(document).ready(function () {
    // Preloader
    $(window).on('load', function () {
        setTimeout(function () {
            $('#preloader').fadeOut('slow', function () {
                $(this).remove();
            });
        }, 100); // Añadir un retraso antes de eliminar el preloader
    });

    AOS.init({
        duration: 100,
        once: true,
    });

    // Usage Options Toggle
    $('#user-btn').click(function () {
        $(this).addClass('active');
        $('#provider-btn').removeClass('active');
        $('#user-steps').show();
        $('#provider-steps').hide();
        $('#steps-carousel img').removeClass('active').first().addClass('active'); // Mostrar la imagen correcta para "Soy Usuario"
        $('#steps-carousel').show(); // Mostrar el carrusel de "Soy Usuario"
    });

    $('#provider-btn').click(function () {
        $(this).addClass('active');
        $('#user-btn').removeClass('active');
        $('#provider-steps').show();
        $('#user-steps').hide();
        $('#steps-carousel img').removeClass('active').first().addClass('active'); // Mostrar la imagen correcta para "Soy Prestador"
        $('#steps-carousel').hide(); // Ocultar el carrusel de "Soy Usuario"
    });

    // Carousel de imágenes para los pasos del proceso
    const images = $('#steps-carousel img');
    let currentIndex = 0;

    function showImage(index) {
        images.removeClass('active').eq(index).addClass('active');
    }

    function nextImage() {
        currentIndex = (currentIndex + 1) % images.length;
        showImage(currentIndex);
    }

    setInterval(nextImage, 3000); // Cambiar de imagen cada 3 segundos

    // Mostrar el carrusel al desplazarse por la sección de pasos
    $(window).on('scroll', function () {
        if ($(window).scrollTop() > $('#how-to').offset().top - 200) {
            images.addClass('visible');
        } else {
            images.removeClass('visible');
        }
    });
});